@charset "UTF-8";
/* Asegura que el CSS se interprete como UTF-8 */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: #1a1a2e;
    display: grid;
    place-items: center;
    height: 100vh;
    font-family: 'Poppins', sans-serif;
    color: white;
    /* overflow: hidden; */
}

.hidden { display: none !important; }

/* --- ESTILOS PARA ESCRITORIO (PANTALLAS GRANDES) --- */
@media (min-width: 801px) {
    .main-container {
        position: relative;
        width: min(88vh, 880px);
        height: min(88vh, 880px);
    }
    .board {
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-columns: 1.4fr repeat(9, 1fr) 1.4fr;
        grid-template-rows: 1.4fr repeat(9, 1fr) 1.4fr;
    }
    .center-panel {
        grid-column: 2 / 11;
        grid-row: 2 / 11;
        width: 100%;
        height: 100%;
        position: relative;
    }
    .game-title { font-size: clamp(2em, 6vw, 4em); }
    .player-info div { font-size: clamp(14px, 2.2vw, 18px); }
    .die { font-size: clamp(5px, 1.2vw, 9px); }

    .cell .name {
        font-size: clamp(10px, 1.8vw, 12px);
    }
    .cell .price {
        font-size: clamp(9px, 1.7vw, 11px);
    }

    /* Posici√≥n panel de mensajes (centrado con transform) */
    .game-message-panel {
        width: 80%;
        max-width: 350px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* Centrado original */
        z-index: 50;
        opacity: 1;
        visibility: visible;
        /* Transici√≥n a√±adida para animaci√≥n pop */
         transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
}

/* --- ESTILOS PARA M√ìVILES Y PANTALLAS PEQUE√ëAS --- */
@media (max-width: 800px) {
    body {
        display: block;
        height: auto;
        overflow-x: hidden;
        overflow-y: auto;
    }
    .main-container {
        display: flex;
        flex-direction: column;
        width: 100%;
        min-height: 100vh;
        padding: 10px;
        align-items: center;
        justify-content: flex-start;
    }
    .board {
        width: 100%;
        max-width: 500px;
        aspect-ratio: 1 / 1;
        display: grid;
        grid-template-columns: 1.4fr repeat(9, 1fr) 1.4fr;
        grid-template-rows: 1.4fr repeat(9, 1fr) 1.4fr;
    }
    .center-panel {
        grid-column: 2 / 11;
        grid-row: 2 / 11;
        position: relative;
        display: flex;
        align-items: center;
        flex-direction: column;
        justify-content: center;
    }
    .board .player-info, .board .controls, .board .turn-indicator {
        display: none;
    }
    .game-title {
        font-size: clamp(10vw, 15vw, 80px);
        display: none; /* Logo oculto en m√≥vil */
    }

    .main-container > .board > .center-panel {
        background: transparent;
        border: none;
    }
    .controls {
        order: 3;
        background-color: #16213e;
        border: 2px solid #4a4e69;
        border-radius: 0 0 10px 10px;
        padding: 15px;
        width: 100%;
        max-width: 500px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .player-info {
        order: 2;
        width: 100%;
        max-width: 500px;
        box-sizing: border-box;
        background-color: #16213e;
        border: 2px solid #4a4e69;
        border-bottom: none;
        border-radius: 10px 10px 0 0;
        padding: 15px;
        margin-top: 20px;
        text-align: center;
    }
     .player-info div { font-size: 1.3em; }
     .die { font-size: 8px; }
     .cell { font-size: clamp(6px, 1.8vw, 9px); }
     .cell .name {
        word-break: break-word;
        font-size: clamp(6px, 1.4vw, 9px); /* Fuente reducida en m√≥vil */
    }
    .cell .price {
        font-size: clamp(6px, 1.3vw, 8px); /* Fuente reducida en m√≥vil */
    }

     /* Iconos reducidos en m√≥vil */
    .cell::before {
        font-size: clamp(16px, 3vw, 26px);
    }
    .marker-emoji {
        font-size: clamp(12px, 2.5vw, 22px);
    }

    /* Posici√≥n panel de mensajes en m√≥vil */
    .game-message-panel {
        width: 95%;
        margin-top: 20px;
        position: static;
        transform: none;
        order: 1;
        opacity: 1;
        visibility: visible;
        /* Transici√≥n a√±adida para animaci√≥n pop */
        transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
}
@media (max-width: 360px) {
    .cell .price {
        display: none;
    }
}

/* --- ESTILOS COMUNES --- */
.board {
    background-color: #0f0f1a;
    border: 3px solid #4a4e69;
    box-sizing: border-box;
    border-radius: 10px;
    gap: 2px;
    position: relative;
}

/* Estilo de celda simplificado: SIN rotaciones */
.cell {
    border: 1px solid #4a4e69;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-around;
    text-align: center;
    padding: 4px;
    box-sizing: border-box;
    transition: border-color 0.4s ease, box-shadow 0.4s ease;
    background-color: #16213e;
    border-radius: 4px;
    font-weight: 600;
    overflow: hidden;
}

/* Barra de color */
.color-bar {
    order: -1;
    height: 18%;
    width: 100%;
    margin-bottom: 3px;
    flex-shrink: 0;
}

/* Contenido celdas */
.cell .name {
    line-height: 1.1;
    font-weight: 600;
    /* font-size definido en media queries */
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    overflow-wrap: break-word;
    hyphens: auto;
}
.cell .price {
    font-weight: 600;
    background-color: rgba(0, 0, 0, 0.4);
    padding: 2px 4px;
    border-radius: 4px;
    width: auto;
    max-width: 95%;
    /* font-size definido en media queries */
    flex-shrink: 0;
    white-space: nowrap;
    margin-top: 3px;
}

/* Esquinas */
.corner {
    justify-content: center !important;
    align-items: center !important;
    font-weight: 700;
    line-height: 1.1;
    padding: 5%;
}
.corner .name {
     display: block !important;
     font-size: clamp(10px, 2vw, 13px);
     flex-grow: 0;
     margin-top: 3px;
     width: auto;
     overflow-wrap: normal;
     hyphens: none;
}
.corner .price { display: none; }

/* Iconos (::before) */
.cell::before {
    font-size: clamp(24px, 4vw, 38px); /* Tama√±o base escritorio */
    display: block;
    margin-bottom: 3px;
    line-height: 1;
}
#cell-0::before  { content: '\1F3C1'; } /* üèÅ */
#cell-10::before { content: '\1F46E'; } /* üëÆ */
#cell-20::before { content: '\1F17F\FE0F'; } /* üÖøÔ∏è */
#cell-30::before { content: '\1F693'; } /* üöì */
#cell-2::before, #cell-17::before, #cell-33::before { content: '\2753';} /* ‚ùì */
#cell-7::before, #cell-22::before, #cell-36::before { content: '\1F340';} /* üçÄ */
#cell-12::before { content: '\1F4A7';} /* üíß */
#cell-28::before { content: '\26A1';} /* ‚ö° */
#cell-5::before, #cell-15::before, #cell-25::before, #cell-35::before { content: '\2708\FE0F';} /* ‚úàÔ∏è */
#cell-4::before { content: '\1F4B0';} /* üí∞ */
#cell-38::before { content: '\1F48E';} /* üíé */

/* Nombres esquinas visibles */
#cell-0 .name, #cell-10 .name, #cell-20 .name, #cell-30 .name { display: block !important;}

/* Ocultar nombres donde solo va icono */
#cell-2 .name, #cell-2 .price,
#cell-4 .name,
#cell-5 .name,
#cell-7 .name, #cell-7 .price,
#cell-12 .name,
#cell-15 .name,
#cell-17 .name, #cell-17 .price,
#cell-22 .name, #cell-22 .price,
#cell-25 .name,
#cell-28 .name,
#cell-33 .name, #cell-33 .price,
#cell-35 .name,
#cell-36 .name, #cell-36 .price,
#cell-38 .name
{
    display: none !important;
}

/* Espacio icono-precio */
#cell-4 .price, #cell-38 .price, #cell-12 .price, #cell-28 .price,
#cell-5 .price, #cell-15 .price, #cell-25 .price, #cell-35 .price {
     margin-top: 5px;
}
@keyframes breathe {
    0% { box-shadow: 0 0 15px; }
    50% { box-shadow: 0 0 25px; }
    100% { box-shadow: 0 0 15px; }
}

.monopoly-glow {
    animation: breathe 2s infinite ease-in-out;
}

.player-marker {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    /* --- A√ëADIDO: Transici√≥n suave para el movimiento --- */
    transition: top 0.1s linear, left 0.1s linear, transform 0.1s linear;
    z-index: 100;
    pointer-events: none;
    transform-origin: center center;
}
.marker-emoji {
    /* font-size definido en media query de m√≥vil */
    font-size: clamp(16px, 3.5vw, 30px); /* Tama√±o base escritorio */
    line-height: 1;
    text-shadow: 0 0 5px black;
    /* transition: transform 0.1s linear; */ /* Transici√≥n interna del emoji quiz√°s no necesaria */
    margin-bottom: 4px;
}

.marker-arrow {
    width: 0;
    height: 0;
    border-left: clamp(6px, 1.2vw, 10px) solid transparent;
    border-right: clamp(6px, 1.2vw, 10px) solid transparent;
    border-top: clamp(8px, 1.8vw, 14px) solid;
}

.center-panel {
    z-index: 20;
    background-color: #16213e;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border: 2px solid #4a4e69;
    border-radius: 5px;
}
.turn-indicator {
    font-size: clamp(1em, 2.5vw, 1.5em);
    font-weight: 600;
    margin-bottom: 5px;
    height: 1.5em;
    text-align: center;
}

.controls {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.dice-container { display: flex; gap: 20px; margin-bottom: 10px; perspective: 1000px; }
.dice-total { font-size: clamp(1.5em, 3vw, 2.2em); font-weight: bold; color: #fff; height: 1.2em; margin-bottom: 15px; text-align: center; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
.die {
    width: 6em;
    height: 6em;
    background-color: #fff;
    border-radius: 1em;
    box-shadow: 0 0.5em 1.5em rgba(0,0,0,0.3);
    display: grid;
    padding: 0.5em;
    box-sizing: border-box;
}

/* --- A√ëADIDO: Regla para aplicar animaci√≥n de dados --- */
.die.rolling {
    animation: roll 1s ease-out; /* Usa la animaci√≥n 'roll' */
}
/* --- FIN A√ëADIDO --- */

.dot { width: 1.2em; height: 1.2em; background-color: #16213e; border-radius: 50%; }
.face-1 { grid-template-areas: ". . ." ". a ." ". . ."; }
.face-2 { grid-template-areas: "a . ." ". . ." ". . b"; }
.face-3 { grid-template-areas: "a . ." ". b ." ". . c"; }
.face-4 { grid-template-areas: "a . b" ". . ." "c . d"; }
.face-5 { grid-template-areas: "a . b" ". c ." "d . e"; }
.face-6 { grid-template-areas: "a . b" "c . d" "e . f"; }
.face-1 .dot:nth-child(1) { grid-area: a; justify-self: center; align-self: center; }
.face-2 .dot:nth-child(1) { grid-area: a; } .face-2 .dot:nth-child(2) { grid-area: b; justify-self: end; align-self: end; }
.face-3 .dot:nth-child(1) { grid-area: a; } .face-3 .dot:nth-child(2) { grid-area: b; justify-self: center; align-self: center; } .face-3 .dot:nth-child(3) { grid-area: c; justify-self: end; align-self: end; }
.face-4 .dot:nth-child(1) { grid-area: a; } .face-4 .dot:nth-child(2) { grid-area: b; justify-self: end; } .face-4 .dot:nth-child(3) { grid-area: c; align-self: end; } .face-4 .dot:nth-child(4) { grid-area: d; justify-self: end; align-self: end; }
.face-5 .dot:nth-child(1) { grid-area: a; } .face-5 .dot:nth-child(2) { grid-area: b; justify-self: end; } .face-5 .dot:nth-child(3) { grid-area: c; justify-self: center; align-self: center; } .face-5 .dot:nth-child(4) { grid-area: d; align-self: end; } .face-5 .dot:nth-child(5) { grid-area: e; justify-self: end; align-self: end; }
.face-6 .dot:nth-child(1) { grid-area: a; } .face-6 .dot:nth-child(2) { grid-area: b; justify-self: end; } .face-6 .dot:nth-child(3) { grid-area: c; align-self: center; } .face-6 .dot:nth-child(4) { grid-area: d; justify-self: end; align-self: center; } .face-6 .dot:nth-child(5) { grid-area: e; align-self: end; } .face-6 .dot:nth-child(6) { grid-area: f; justify-self: end; align-self: end; }

/* --- A√ëADIDO: Animaci√≥n de dados "cae y rebota" --- */
@keyframes roll {
    0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 0;
    }
    40% {
        transform: translateY(0) rotate(720deg);
        opacity: 1;
    }
    60% {
        transform: translateY(-15px) rotate(700deg);
    }
    80% {
        transform: translateY(0) rotate(720deg);
    }
    100% {
        transform: translateY(0) rotate(720deg);
        opacity: 1;
    }
}
/* --- FIN A√ëADIDO --- */

/* Posici√≥n de casas/hoteles */
.house-display {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: clamp(10px, 1.6vw, 13px);
    width: 100%;
    z-index: 6;
    text-align: center;
    line-height: 1;
    pointer-events: none;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1px 0;
    top: 1px;
    flex-direction: row;
}

.controls button, .modal-btn, .start-btn, .game-message-panel .message-buttons button { background: #5e548e; color: white; border: none; border-radius: 8px; padding: 0.8em 1.2em; font-size: clamp(12px, 1.8vw, 15px); font-weight: bold; font-family: 'Poppins', sans-serif; cursor: pointer; transition: background-color 0.3s, transform 0.1s; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); display: inline-flex; align-items: center; gap: 8px; margin: 5px; }
.controls button:hover, .modal-btn:hover, .start-btn:hover, .game-message-panel .message-buttons button:hover { background-color: #4f467b; }
.controls button:active, .modal-btn:active, .start-btn:active, .game-message-panel .message-buttons button:active { transform: translateY(2px); box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2); }
.modal-btn.pass, .game-message-panel .message-buttons button.pass { background-color: #7f7f7f; }
.modal-btn.pass:hover, .game-message-panel .message-buttons button.pass:hover { background-color: #6a6a6a; }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 100; opacity: 0; visibility: hidden; transition: opacity 0.3s ease; }
.modal-overlay.visible { opacity: 1; visibility: visible; }

/* --- A√ëADIDO: Animaci√≥n "Pop" para Modales --- */
.modal {
    background: linear-gradient(145deg, #2c2c3e, #1e1e2f);
    color: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    text-align: center;
    transform: scale(1); /* Estado base para pop */
    transition: none; /* Quitar transici√≥n anterior */
    width: 90%;
    max-width: 500px;
}
.modal-overlay.visible .modal {
    transform: scale(1); /* Estado final */
    animation: modal-pop-in 0.3s ease-out; /* Aplicar animaci√≥n */
}
@keyframes modal-pop-in { /* Definici√≥n de la animaci√≥n */
    0% { opacity: 0; transform: scale(0.9); }
    70% { opacity: 1; transform: scale(1.05); }
    100% { opacity: 1; transform: scale(1); }
}
/* --- FIN A√ëADIDO --- */

.modal-icon { font-size: 4em; margin-bottom: 15px; }
.modal h2 { margin-top: 0; font-size: 1.8em; color: #a78bfa; }
.modal p { margin-bottom: 20px; font-size: 1.1em; line-height: 1.6; }
.modal-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
.setup-modal { max-width: 800px; max-height: 90vh; overflow-y: auto; }
.setup-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
.player-setup { flex: 1; min-width: 250px; background-color: rgba(0, 0, 0, 0.2); border-radius: 10px; padding: 20px; margin-bottom: 15px; }
.player-setup h3 { margin-top: 0; }
.player-setup p { margin-bottom: 10px; font-size: 1em; }
.player-setup input[type="text"] { width: 90%; padding: 10px; font-size: 1em; border-radius: 5px; border: 2px solid #4a4e69; background-color: #1a1a2e; color: white; margin-bottom: 15px; font-family: 'Poppins', sans-serif; }
.player-setup input[type="color"] { width: 100%; height: 40px; padding: 0; border: none; background: none; cursor: pointer; border-radius: 5px; overflow: hidden; -webkit-appearance: none; -moz-appearance: none; appearance: none; border: 2px solid #5e548e; margin-bottom: 15px; }
.player-setup input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
.player-setup input[type="color"]::-webkit-color-swatch { border: none; border-radius: 3px; }
.player-setup input[type="color"]::-moz-color-swatch { border: none; border-radius: 3px; }
.emoji-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(40px, 1fr)); gap: 10px; margin-bottom: 15px; }
.emoji-choice { font-size: 2em; padding: 5px; border: 2px solid transparent; border-radius: 8px; background-color: rgba(255, 255, 255, 0.1); cursor: pointer; transition: all 0.2s; }
.emoji-choice:hover { background-color: rgba(255, 255, 255, 0.2); }
.emoji-choice.selected { border-color: #a78bfa; background-color: #5e548e; }
.start-btn { padding: 15px 30px; font-size: 1.2em; margin-top: 20px; }
.setup-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
}
.manage-modal {
    max-width: 700px;
    text-align: left;
}
.manage-content {
    max-height: 60vh;
    overflow-y: auto;
    padding-right: 15px;
}
.manage-group {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    border-left: 5px solid;
}
.manage-property {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #4a4e69;
}
.manage-property:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}
.property-name {
    font-weight: 600;
}
.build-btn {
    padding: 8px 12px;
    font-size: 0.9em;
}
/* Panel de Mensajes */
.game-message-panel {
    background: linear-gradient(145deg, #2c2c3e, #1e1e2f);
    color: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    /* Transici√≥n a√±adida/mantenida para pop */
    transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 2px solid #a78bfa;
    /* Estado visible definido en media queries */
}
/* Redefinici√≥n de .hidden para el panel */
.game-message-panel.hidden {
    display: flex !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translate(var(--x-pos, -50%), var(--y-pos, -50%)) scale(0.9) !important; /* Usa variables con fallback */
    pointer-events: none !important;
}

.game-message-panel .message-icon {
    font-size: 3.5em;
    line-height: 1;
}

.game-message-panel #message-title {
    margin: 0;
    font-size: 1.6em;
    color: #a78bfa;
}

.game-message-panel #message-text {
    margin-bottom: 10px;
    font-size: 1em;
    line-height: 1.5;
}

.game-message-panel .message-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

/* --- ESTILOS DEL MODAL DE INTERCAMBIO --- */
.trade-modal {
    max-width: 800px;
    text-align: center;
}

.trade-interface {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    text-align: left;
}

.trade-offer {
    flex: 1;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 15px;
}

.trade-offer h3 {
    text-align: center;
    margin-bottom: 15px;
    color: #a78bfa;
}

.trade-money {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}

.trade-money input {
    width: 100%;
    padding: 8px;
    font-size: 1em;
    border-radius: 5px;
    border: 2px solid #4a4e69;
    background-color: #1a1a2e;
    color: white;
    font-family: 'Poppins', sans-serif;
}

.trade-properties {
    max-height: 25vh;
    overflow-y: auto;
    padding-right: 10px;
}

.trade-property-item {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    background-color: rgba(255, 255, 255, 0.05);
    padding: 8px;
    border-radius: 5px;
}

.trade-property-item input[type="checkbox"] {
    margin-right: 10px;
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.trade-property-item .color-indicator {
    width: 15px;
    height: 15px;
    border-radius: 3px;
    margin-right: 10px;
    border: 1px solid #fff;
}

.trade-partner-selection p {
    margin-bottom: 15px;
    font-size: 1.2em;
}

@media (max-width: 600px) {
    .trade-interface {
        flex-direction: column;
    }
}

/* --- ESTILOS DE LA TARJETA DE PROPIEDAD --- */
#property-card-modal {
    padding: 0;
    max-width: 320px;
    background: #282a3e;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid #5e548e;
}
#property-card-content { color: #f0f0f0; }
.card-header { padding: 12px 20px; padding-bottom: 10px; background: #1e1e2f; }
.card-color-bar { height: 20px; width: 100%; margin: -12px -20px 10px -20px; border-bottom: 2px solid rgba(0,0,0,0.3); }
.card-title { font-size: 1.8em; font-weight: 700; color: #fff; text-align: center; }
.card-body { padding: 10px 20px 20px 20px; }
.card-body p { font-size: 1em; line-height: 1.4; text-align: center; margin-bottom: 15px; }
.card-rent-list { list-style: none; padding: 0; margin: 0; border-top: 1px solid #4a4e69; }
.card-rent-list li { display: flex; justify-content: space-between; padding: 8px 0; font-size: 1.1em; border-bottom: 1px solid #4a4e69; }
.rent-when { font-weight: 400; }
.rent-get { font-weight: 700; color: #a78bfa; }
.card-footer { display: flex; justify-content: space-around; background: rgba(0, 0, 0, 0.2); padding: 12px; border-top: 1px solid #4a4e69; }
.footer-item { text-align: center; font-size: 0.9em; color: #c0c0c0; }
.footer-item div:first-child { font-size: 1.3em; font-weight: 700; color: #fff; margin-bottom: 2px; }